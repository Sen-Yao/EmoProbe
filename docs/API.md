## 管理视频
### 添加视频信息进入数据库

> /api/v1/videos

*请求方式：POST*
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |
| bv      | str  | 视频bv号                | 必要           |                                      |

**效果：**
服务器将爬取指定视频的基本信息和评论信息，并对每一条评论进行情绪感知，然后保存进数据库。

如果服务器已经保存了此BV号的视频，或是添加时出现错误，则数据库不会更新。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />405：数据库中已经存在此视频<br />406：添加时出现错误 |
| msg | str  | 错误信息 | 默认为0                       |


## 从数据库中删除视频

> /api/v1/videos

请求方式：DELETE
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |
| bv      | str  | 视频bv号                | 必要           |                                      |

**效果：**
将删除指定视频在数据库中的基本信息与所有评论，包括情绪感知结果。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />407：数据库找不到此资源 |
| msg | str  | 错误信息 | 默认为0                       |

### 更新视频信息

> /api/v1/videos

*请求方式：PUT
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |
| bv      | str  | 视频bv号                | 必要           |                                      |

**效果：**
重新爬取指定视频基本信息与评论信息，并进行情绪感知，并替换原本视频的所有信息。

注意，如果服务器原本不保存此BV号的视频信息，则服务器将不会爬取信息。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />407：数据库找不到此资源 |
| msg | str  | 错误信息 | 默认为0                       |

## 获取指定视频信息

> /api/v1/videos

*请求方式：GET
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |
| bv      | str  | 视频bv号                | 必要           |                                      |
| autopost      | num  | 视频bv号                | 非必要           | 值为1时，如果数据库没有此BV视频的信息，服务器将自动爬取并分析此BV视频的评论信息，随后将结果返回                                     |

**效果：**
获取视频信息，将不会更新或爬取视频信息。

如果autopost为1，将自动爬取视频信息，但同样不会更新已经在数据库中的视频信息。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />407：数据库找不到此资源<br />408：数据库找不到此资源，且添加失败（当autopost为1时） |
| msg | str  | 错误信息 | 默认为0                       |
| data     | obj  | 数据        |                               |

data对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| operationTime    | str  | 时间   | 后端处理这条视频的评论的时间，示例："2023-10-08 12:40:32" |
| video_aid       | str  | 视频aid号    | 字符串，但是是数字                       |
| owner_uid       | str  | UP主用户uid |  字符串，但是是数字                      |
| owner_name      | str  | UP主用户名   |                        |
| video_title     | str  | 视频标题     |                        |
| video_partition | str  | 视频分区     |                        |
| video_tables    | str  | 视频分区     |                        |
| video_pubdate   | str  | 视频发布时间 | 格式为"2023-10-08 12:40:32"       |
| video_duration  | num  | 视频时长     | 单位为秒               |
| video_like      | num  | 点赞数       |                        |
| video_coin      | num  | 投币数       |                        |
| video_favorite  | num  | 收藏数       |                        |
| video_share     | num  | 分享数       |                        |
| video_reply     | num  | 评论数       |                        |
| video_dislike   | num  | 点踩数       |                        |
| video_cid       | num  | 视频cid号    |                        |
| comments       | list  | 评论列表    |                        |


comments列表，其中所有对象都以以下格式组织：

| 字段  | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| user_uid          |      |   str       |  字符串，但是是数字                        |
| user_name         |      |   str       |                          |
| user_ip           |      |   str       |                          |
| user_sex          |      |  str        | 有“保密”、“男”、“女”   |
| comment_date      |      |  str        | 示例："2023-10-08 12:40:32" |
| comment_text      |      |  str        |                          |
| comment_like      |      |  num        | 点赞数量                         |
| comment_reply     |      |  num        | 回复数量                         |
| emotion     | str  | 情感        |                               |


## 感知由用户直接上传的评论信息

> /api/v1/comments

*请求方式：POST
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |

**附带信息：**

根对象：
| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| bv              | str  | 视频bv号     | 形式：“BVXXXXXX”       |
| video_aid       | str  | 视频aid号    | 字符串，但是是数字                       |
| owner_uid       | str  | UP主用户uid |  字符串，但是是数字                      |
| owner_name      | str  | UP主用户名   |                        |
| video_title     | str  | 视频标题     |                        |
| video_partition | str  | 视频分区     |                        |
| video_tables    | str  | 视频分区     |                        |
| video_pubdate   | str  | 视频发布时间 | 格式为"2023-10-08 12:40:32"       |
| video_duration  | num  | 视频时长     | 单位为秒               |
| video_like      | num  | 点赞数       |                        |
| video_coin      | num  | 投币数       |                        |
| video_favorite  | num  | 收藏数       |                        |
| video_share     | num  | 分享数       |                        |
| video_reply     | num  | 评论数       |                        |
| video_dislike   | num  | 点踩数       |                        |
| video_cid       | num  | 视频cid号    |                        |
| comments       | list  | 评论列表    |                        |

comments列表，其中所有对象都以以下格式组织：

| 字段              | 类型 | 内容     | 备注                     |
| ----------------- | ---- | -------- | ------------------------ |
| user_uid          |      |   str       |  字符串，但是是数字                        |
| user_name         |      |   str       |                          |
| user_ip           |      |   str       |                          |
| user_sex          |      |  str        | 有“保密”、“男”、“女”   |
| comment_date      |      |  str        | 示例："2023-10-08 12:40:32" |
| comment_text      |      |  str        |                          |
| comment_like      |      |  num        | 点赞数量                         |
| comment_reply     |      |  num        | 回复数量                         |


**效果：**
获取视频信息，需要预先准备好评论文件（json格式）。

将保存这些信息进入数据库。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />409：失败 |
| msg | str  | 错误信息 | 默认为0                       |
| data     | obj  | 数据        |                               |

data对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| operationTime    | str  | 时间   | 后端处理这条视频的评论的时间，示例："2023-10-08 12:40:32" |
| video_aid       | str  | 视频aid号    | 字符串，但是是数字                       |
| owner_uid       | str  | UP主用户uid |  字符串，但是是数字                      |
| owner_name      | str  | UP主用户名   |                        |
| video_title     | str  | 视频标题     |                        |
| video_partition | str  | 视频分区     |                        |
| video_tables    | str  | 视频分区     |                        |
| video_pubdate   | str  | 视频发布时间 | 格式为"2023-10-08 12:40:32"       |
| video_duration  | num  | 视频时长     | 单位为秒               |
| video_like      | num  | 点赞数       |                        |
| video_coin      | num  | 投币数       |                        |
| video_favorite  | num  | 收藏数       |                        |
| video_share     | num  | 分享数       |                        |
| video_reply     | num  | 评论数       |                        |
| video_dislike   | num  | 点踩数       |                        |
| video_cid       | num  | 视频cid号    |                        |
| comments       | list  | 评论列表    |                        |


comments列表，其中所有对象都以以下格式组织：

| 字段  | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| user_uid          |      |   str       |  字符串，但是是数字                        |
| user_name         |      |   str       |                          |
| user_ip           |      |   str       |                          |
| user_sex          |      |  str        | 有“保密”、“男”、“女”   |
| comment_date      |      |  str        | 示例："2023-10-08 12:40:32" |
| comment_text      |      |  str        |                          |
| comment_like      |      |  num        | 点赞数量                         |
| comment_reply     |      |  num        | 回复数量                         |
| emotion     | str  | 情感        |                               |



## 获取视频列表

> /api/v1/videos/list

*请求方式：GET
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |


**效果：**
感知评论内容，数据不进入数据库。

用于调试系统感知功能是否正常。

**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />409：请求失败 |
| msg | str  | 错误信息 | 默认为0                       |
| data     | obj  | 数据        |                               |

data对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| bv_list | list  | 评论列表 |                        |

bv_list是评论列表，其中所有对象均为字符串，格式是'BVXXXXXXXX'


## 快速感知评论信息

> /api/v1/debug/comments

*请求方式：POST
**正文参数：**

| 参数名  | 类型 | 内容                     | 必要性         | 备注                                 |
| ------- | ---- | ------------------------ | -------------- | ------------------------------------ |

**附带信息：**
| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| comments    | list  | 评论列表   | |

comments列表，其中所有对象都以以下格式组织：

| 字段  | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| content     | str  | 评论内容        |                               |


**效果：**
感知单独的评论内容，数据也会进入数据库。


**json回复：**
根对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| code    | num  | 返回值   | 200：成功<br />409：失败 |
| msg | str  | 错误信息 | 默认为0                       |
| data     | obj  | 数据        |                               |

data对象：

| 字段    | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| operationTime    | str  | 时间   | 后端处理这些评论的时间，示例："2023-10-08 12:40:32" |
| comments | list  | 评论列表 |                        |

comments列表，其中所有对象都以以下格式组织：

| 字段  | 类型 | 内容     | 备注                          |
| ------- | ---- | -------- | ----------------------------- |
| content     | str  | 评论内容        |                               |
| emotion     | str  | 情感        |                               |

